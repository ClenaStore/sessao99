<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>SESS√ÉO 99</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>

<style>
:root{
  --bg:#000;
  --panel:#111;
  --text:#fff;
  --muted:#b3b3b3;
  --accent:#e50914;
  --green:#46d369;
}
*{box-sizing:border-box}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:Inter,Arial,sans-serif;
}
.hidden{display:none}

/* ================= LOGIN ================= */
#login{
  position:fixed;
  inset:0;
  background:#000;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:500;
}
.login-box{
  background:#111;
  padding:40px;
  width:320px;
  border-radius:8px;
}
.login-box h1{margin:0 0 20px}
.login-box input{
  width:100%;
  padding:12px;
  margin-bottom:12px;
  border:none;
  background:#222;
  color:#fff;
}
.login-box button{
  width:100%;
  padding:12px;
  border:none;
  background:var(--accent);
  color:#fff;
  font-weight:700;
  cursor:pointer;
}

/* ================= PERFIS ================= */
#profiles{
  position:fixed;
  inset:0;
  background:#000;
  z-index:400;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
}
.profile-list{
  display:flex;
  gap:40px;
}
.profile{
  cursor:pointer;
  text-align:center;
}
.profile img{
  width:120px;
  height:120px;
  border-radius:8px;
}
.profile span{display:block;margin-top:10px}

/* ================= HEADER ================= */
header{
  position:fixed;
  top:0;left:0;right:0;
  z-index:100;
  padding:18px 48px;
  display:flex;
  justify-content:space-between;
  background:linear-gradient(to bottom,rgba(0,0,0,.95),transparent);
}
.logo{font-size:26px;font-weight:900}
.logo span{color:var(--accent)}

/* ================= HOME ================= */
#home{
  padding-top:110px;
  padding-bottom:80px;
}
.section{margin-bottom:46px}
.section h2{
  margin:0 0 16px 48px;
  font-size:22px;
}
.row{
  display:flex;
  gap:16px;
  padding:0 48px;
  overflow-x:auto;
}
.card{
  min-width:200px;
  cursor:pointer;
  position:relative;
}
.card img{
  width:100%;
  height:300px;
  object-fit:cover;
  border-radius:4px;
}
.card:focus{
  outline:4px solid var(--accent);
  transform:scale(1.1);
}

/* ================= DETAILS ================= */
#details{
  position:fixed;
  inset:0;
  background:#000;
  z-index:200;
  display:none;
}
.details-bg video{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
}
.details-bg::after{
  content:"";
  position:absolute;
  inset:0;
  background:
    linear-gradient(to right,rgba(0,0,0,.95) 20%,rgba(0,0,0,.6) 50%,transparent),
    linear-gradient(to top,rgba(0,0,0,.9) 10%,transparent 50%);
}
.details-info{
  position:relative;
  padding:140px 60px;
  max-width:640px;
}
.details-info h1{font-size:44px;margin:0}
.details-info p{color:var(--muted)}
.actions{
  display:flex;
  gap:12px;
  margin-top:20px;
}
.actions button{
  padding:12px 20px;
  font-weight:700;
  cursor:pointer;
  border:none;
}
.play{background:#fff}
.like{background:#222;color:#fff}
.dislike{background:#222;color:#fff}

/* ================= PLAYER ================= */
#player{
  position:fixed;
  inset:0;
  background:#000;
  z-index:300;
  display:none;
}
#player video{
  width:100%;
  height:100%;
}

/* ================= MOBILE ================= */
@media(max-width:900px){
  .details-info{padding:110px 20px}
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login">
  <div class="login-box">
    <h1>Entrar</h1>
    <input id="email" placeholder="Email">
    <input id="senha" type="password" placeholder="Senha">
    <button onclick="login()">Entrar</button>
  </div>
</div>

<!-- PERFIS -->
<div id="profiles" class="hidden">
  <h1>Quem est√° assistindo?</h1>
  <div class="profile-list" id="profileList"></div>
</div>

<header class="hidden" id="header">
  <div class="logo">SESS√ÉO <span>99</span></div>
</header>

<div id="home" class="hidden"></div>

<!-- DETAILS -->
<div id="details">
  <div class="details-bg">
    <video id="previewVideo" muted autoplay loop playsinline></video>
  </div>
  <div class="details-info">
    <h1 id="detailsTitulo"></h1>
    <p id="detailsDesc"></p>
    <div class="actions">
      <button class="play" onclick="abrirPlayer()">‚ñ∂ Assistir</button>
      <button class="like" onclick="avaliar(1)">üëç</button>
      <button class="dislike" onclick="avaliar(-1)">üëé</button>
    </div>
  </div>
</div>

<!-- PLAYER -->
<div id="player">
  <video id="playerVideo" controls></video>
</div>

<script>
/* ================= STATE ================= */
let perfil=null,usuario=null,atual=null;
let progresso={},avaliacoes={};

/* LOGIN */
function login(){
  usuario={email:email.value};
  localStorage.setItem("usuario",JSON.stringify(usuario));
  document.getElementById("login").style.display="none";
  abrirPerfis();
}

/* PERFIS */
function abrirPerfis(){
  document.getElementById("profiles").classList.remove("hidden");
  const list=document.getElementById("profileList");
  list.innerHTML="";
  ["Ana","Carlos","Kids"].forEach(nome=>{
    const p=document.createElement("div");
    p.className="profile";
    p.innerHTML=`<img src="https://i.pravatar.cc/150?u=${nome}"><span>${nome}</span>`;
    p.onclick=()=>selecionarPerfil(nome);
    list.appendChild(p);
  });
}
function selecionarPerfil(nome){
  perfil=nome;
  document.getElementById("profiles").style.display="none";
  document.getElementById("header").classList.remove("hidden");
  document.getElementById("home").classList.remove("hidden");
  carregar();
}

/* HOME MOCK */
function carregar(){
  renderSection("Filmes",[{
    id:1,titulo:"Filme Exemplo",
    descricao:"Descri√ß√£o do filme",
    capa_url:"https://picsum.photos/300/450",
    video_url:"https://www.w3schools.com/html/mov_bbb.mp4"
  }]);
}
function renderSection(titulo,itens){
  const home=document.getElementById("home");
  home.innerHTML="";
  const sec=document.createElement("div");
  sec.className="section";
  sec.innerHTML=`<h2>${titulo}</h2>`;
  const row=document.createElement("div");
  row.className="row";
  itens.forEach(i=>{
    const c=document.createElement("div");
    c.className="card";
    c.tabIndex=0;
    c.innerHTML=`<img src="${i.capa_url}">`;
    c.onclick=()=>abrirDetails(i);
    row.appendChild(c);
  });
  sec.appendChild(row);
  home.appendChild(sec);
}

/* DETAILS */
function abrirDetails(item){
  atual=item;
  document.getElementById("detailsTitulo").textContent=item.titulo;
  document.getElementById("detailsDesc").textContent=item.descricao;
  previewVideo.src=item.video_url;
  previewVideo.play();
  document.getElementById("details").style.display="block";
}

/* PLAYER */
function abrirPlayer(){
  playerVideo.src=atual.video_url;
  document.getElementById("player").style.display="block";
  playerVideo.play();
}

/* AVALIA√á√ÉO */
function avaliar(v){
  avaliacoes[perfil]=avaliacoes[perfil]||{};
  avaliacoes[perfil][atual.id]=v;
  alert(v===1?"Curtido":"N√£o curti");
}

/* TECLADO / CONTROLE */
document.addEventListener("keydown",e=>{
  const focus=document.activeElement;
  if(e.key==="ArrowRight" && focus.nextElementSibling) focus.nextElementSibling.focus();
  if(e.key==="ArrowLeft" && focus.previousElementSibling) focus.previousElementSibling.focus();
  if(e.key==="Escape"){
    document.getElementById("player").style.display="none";
    document.getElementById("details").style.display="none";
  }
});

/* INIT */
if(localStorage.usuario){
  usuario=JSON.parse(localStorage.usuario);
  document.getElementById("login").style.display="none";
  abrirPerfis();
}
</script>

</body>
</html>
